[2024-11-12T22:13:34.669+0000] {local_task_job_runner.py:120} INFO - ::group::Pre task execution logs
[2024-11-12T22:13:34.700+0000] {taskinstance.py:2073} INFO - Dependencies all met for dep_context=non-requeueable deps ti=<TaskInstance: extractAPItoBronze.api_available manual__2024-11-12T21:23:43.667318+00:00 [queued]>
[2024-11-12T22:13:34.744+0000] {taskinstance.py:2073} INFO - Dependencies all met for dep_context=requeueable deps ti=<TaskInstance: extractAPItoBronze.api_available manual__2024-11-12T21:23:43.667318+00:00 [queued]>
[2024-11-12T22:13:34.753+0000] {taskinstance.py:2303} INFO - Starting attempt 18 of 21
[2024-11-12T22:13:34.781+0000] {taskinstance.py:2327} INFO - Executing <Task(HttpSensor): api_available> on 2024-11-12 21:23:43.667318+00:00
[2024-11-12T22:13:34.800+0000] {warnings.py:110} WARNING - /home/***/.local/lib/python3.12/site-packages/***/task/task_runner/standard_task_runner.py:61: DeprecationWarning: This process (pid=396) is multi-threaded, use of fork() may lead to deadlocks in the child.
  pid = os.fork()

[2024-11-12T22:13:34.803+0000] {standard_task_runner.py:63} INFO - Started process 398 to run task
[2024-11-12T22:13:34.801+0000] {standard_task_runner.py:90} INFO - Running: ['***', 'tasks', 'run', 'extractAPItoBronze', 'api_available', 'manual__2024-11-12T21:23:43.667318+00:00', '--job-id', '133', '--raw', '--subdir', 'DAGS_FOLDER/ExtracttoBronze.py', '--cfg-path', '/tmp/tmp36c1ul0q']
[2024-11-12T22:13:34.805+0000] {standard_task_runner.py:91} INFO - Job 133: Subtask api_available
[2024-11-12T22:13:34.879+0000] {task_command.py:426} INFO - Running <TaskInstance: extractAPItoBronze.api_available manual__2024-11-12T21:23:43.667318+00:00 [running]> on host bbd2fa8da241
[2024-11-12T22:13:35.015+0000] {taskinstance.py:2644} INFO - Exporting env vars: AIRFLOW_CTX_DAG_OWNER='***' AIRFLOW_CTX_DAG_ID='extractAPItoBronze' AIRFLOW_CTX_TASK_ID='api_available' AIRFLOW_CTX_EXECUTION_DATE='2024-11-12T21:23:43.667318+00:00' AIRFLOW_CTX_TRY_NUMBER='18' AIRFLOW_CTX_DAG_RUN_ID='manual__2024-11-12T21:23:43.667318+00:00'
[2024-11-12T22:13:35.017+0000] {taskinstance.py:430} INFO - ::endgroup::
[2024-11-12T22:13:35.045+0000] {baseoperator.py:399} WARNING - HttpSensor.execute cannot be called outside TaskInstance!
[2024-11-12T22:13:35.046+0000] {http.py:137} INFO - Poking: brewerie
[2024-11-12T22:13:35.064+0000] {base.py:84} INFO - Using connection ID 'api' for task execution.
[2024-11-12T22:13:35.795+0000] {http.py:199} ERROR - HTTP error: Not Found
[2024-11-12T22:13:35.796+0000] {http.py:200} ERROR - 
[2024-11-12T22:14:35.797+0000] {http.py:137} INFO - Poking: brewerie
[2024-11-12T22:14:35.811+0000] {base.py:84} INFO - Using connection ID 'api' for task execution.
[2024-11-12T22:14:36.426+0000] {http.py:199} ERROR - HTTP error: Not Found
[2024-11-12T22:14:36.427+0000] {http.py:200} ERROR - 
[2024-11-12T22:15:36.428+0000] {http.py:137} INFO - Poking: brewerie
[2024-11-12T22:15:36.441+0000] {base.py:84} INFO - Using connection ID 'api' for task execution.
[2024-11-12T22:15:36.932+0000] {http.py:199} ERROR - HTTP error: Not Found
[2024-11-12T22:15:36.933+0000] {http.py:200} ERROR - 
[2024-11-12T22:16:36.935+0000] {http.py:137} INFO - Poking: brewerie
[2024-11-12T22:16:36.946+0000] {base.py:84} INFO - Using connection ID 'api' for task execution.
[2024-11-12T22:16:37.524+0000] {http.py:199} ERROR - HTTP error: Not Found
[2024-11-12T22:16:37.525+0000] {http.py:200} ERROR - 
[2024-11-12T22:17:37.523+0000] {http.py:137} INFO - Poking: brewerie
[2024-11-12T22:17:37.535+0000] {base.py:84} INFO - Using connection ID 'api' for task execution.
[2024-11-12T22:17:38.130+0000] {http.py:199} ERROR - HTTP error: Not Found
[2024-11-12T22:17:38.131+0000] {http.py:200} ERROR - 
[2024-11-12T22:18:08.031+0000] {local_task_job_runner.py:310} WARNING - State of this instance has been externally set to restarting. Terminating instance.
[2024-11-12T22:18:08.047+0000] {local_task_job_runner.py:222} INFO - ::endgroup::
[2024-11-12T22:18:08.059+0000] {process_utils.py:132} INFO - Sending 15 to group 398. PIDs of all processes in the group: [398]
[2024-11-12T22:18:08.060+0000] {process_utils.py:87} INFO - Sending the signal 15 to group 398
[2024-11-12T22:18:08.062+0000] {taskinstance.py:2607} ERROR - Received SIGTERM. Terminating subprocesses.
[2024-11-12T22:18:08.065+0000] {taskinstance.py:441} INFO - ::group::Post task execution logs
[2024-11-12T22:18:08.096+0000] {taskinstance.py:2890} ERROR - Task failed with exception
Traceback (most recent call last):
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/models/taskinstance.py", line 465, in _execute_task
    result = _execute_callable(context=context, **execute_callable_kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/models/taskinstance.py", line 432, in _execute_callable
    return execute_callable(context=context, **execute_callable_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/models/baseoperator.py", line 400, in wrapper
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/providers/http/sensors/http.py", line 164, in execute
    super().execute(context=context)
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/models/baseoperator.py", line 400, in wrapper
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/sensors/base.py", line 292, in execute
    time.sleep(self._get_next_poke_interval(started_at, run_duration, try_number))
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/models/taskinstance.py", line 2609, in signal_handler
    raise AirflowTaskTerminated("Task received SIGTERM signal")
airflow.exceptions.AirflowTaskTerminated: Task received SIGTERM signal
[2024-11-12T22:18:08.122+0000] {taskinstance.py:1205} INFO - Marking task as UP_FOR_RETRY. dag_id=extractAPItoBronze, task_id=api_available, execution_date=20241112T212343, start_date=20241112T221334, end_date=20241112T221808
[2024-11-12T22:18:08.125+0000] {logging_mixin.py:188} INFO - Unexpected error: [Errno 2] No such file or directory: '/Users/Bhrenner/Documents/Breweries-Case/dags/utils/password.txt'
[2024-11-12T22:18:08.126+0000] {logging_mixin.py:188} INFO - None
[2024-11-12T22:18:15.446+0000] {logging_mixin.py:188} INFO - Failed to send email: (535, b'5.7.139 Authentication unsuccessful, basic authentication is disabled. [CP3P284CA0125.BRAP284.PROD.OUTLOOK.COM 2024-11-12T22:18:13.906Z 08DD024A38E69B22]')
[2024-11-12T22:18:15.447+0000] {taskinstance.py:1182} ERROR - Error when executing email_status callback
Traceback (most recent call last):
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/models/taskinstance.py", line 2476, in _run_raw_task
    self._execute_task_with_callbacks(context, test_mode, session=session)
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/models/taskinstance.py", line 2663, in _execute_task_with_callbacks
    result = self._execute_task(context, task_orig)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/models/taskinstance.py", line 2686, in _execute_task
    return _execute_task(self, context, task_orig)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/models/taskinstance.py", line 465, in _execute_task
    result = _execute_callable(context=context, **execute_callable_kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/models/taskinstance.py", line 432, in _execute_callable
    return execute_callable(context=context, **execute_callable_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/models/baseoperator.py", line 400, in wrapper
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/providers/http/sensors/http.py", line 164, in execute
    super().execute(context=context)
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/models/baseoperator.py", line 400, in wrapper
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/sensors/base.py", line 292, in execute
    time.sleep(self._get_next_poke_interval(started_at, run_duration, try_number))
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/models/taskinstance.py", line 2609, in signal_handler
    raise AirflowTaskTerminated("Task received SIGTERM signal")
airflow.exceptions.AirflowTaskTerminated: Task received SIGTERM signal

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/opt/airflow/dags/utils/AdditionalFunctions.py", line 135, in email_status
    server.login('breweriescase@hotmail.com', password)
  File "/usr/local/lib/python3.12/smtplib.py", line 739, in login
    (code, resp) = self.auth(
                   ^^^^^^^^^^
  File "/usr/local/lib/python3.12/smtplib.py", line 652, in auth
    authobject(challenge).encode('ascii'), eol='')
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'encode'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/opt/airflow/dags/utils/AdditionalFunctions.py", line 130, in email_status
    with smtplib.SMTP('smtp-mail.outlook.com', 587) as server:
  File "/usr/local/lib/python3.12/smtplib.py", line 284, in __exit__
    raise SMTPResponseException(code, message)
smtplib.SMTPResponseException: (535, b'5.7.139 Authentication unsuccessful, basic authentication is disabled. [CP3P284CA0125.BRAP284.PROD.OUTLOOK.COM 2024-11-12T22:18:13.906Z 08DD024A38E69B22]')

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/models/taskinstance.py", line 1179, in _run_finished_callback
    callback(context)
  File "/opt/airflow/dags/utils/AdditionalFunctions.py", line 144, in email_status
    airflow.utils.email.send_email(
    ^^^^^^^
NameError: name '***' is not defined
[2024-11-12T22:18:15.557+0000] {process_utils.py:80} INFO - Process psutil.Process(pid=398, status='terminated', exitcode=2, started='22:13:34') (398) terminated with exit code 2
